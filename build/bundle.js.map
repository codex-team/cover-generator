{"version":3,"sources":["webpack:///webpack/bootstrap 68dd19c6f0b5aed63592","webpack:///./src/dom.js","webpack:///./src/main.js","webpack:///./src/styles/main.css","webpack:///./src/ui.js","webpack:///./src/redrawer.js","webpack:///./src/canvas.js","webpack:///./src/toolbar.js"],"names":["Dom","tagName","classNames","attributes","el","document","createElement","Array","isArray","classList","add","attrName","tag","param","n","createElementNS","p","setAttributeNS","module","exports","require","ui","Redrawer","default","Canvas","Toolbar","init","initParams","console","assert","containerId","container","getElementById","warn","redrawerInstance","canvasInstance","toolbarInstance","nodes","create","destroy","$","CSS","editor","controls","resizeButton","resizeButtonActive","resizeButtonSquare","resizeButtonVertical","resizeButtonHorisontal","controlButton","headlineControl","mainTextControl","imageControl","controlButtonSave","canvasWrapper","canvas","canvasActive","instances","redrawer","toolbar","mainTextElement","headlineElement","pictureElement","currentText","mainRectangle","resizeSqure","resizeVertical","resizeHorisontal","saveButton","pictureButton","mainTextButton","headlineButton","currentCanvasEditing","canvasClicked","event","target","contains","hide","remove","saveButtonClicked","shot","download","resizeButtonClicked","button","size","dataset","forEach","header","setCanvasFormat","controlButtonsClicked","object","elementType","addEventListener","elementClickedHandler","showToolbar","element","openNear","bindEvents","body","make","textContent","buttonName","appendChild","canvasElement","getContext","shootingElement","shootingCoords","top","left","parent","offsetParent","coords","offsetTop","undefined","offsetLeft","text","regexp","replace","style","window","getComputedStyle","fillStyle","color","font","fontStyle","fontSize","fontFamily","cloneNode","span","parentNode","insertBefore","getCoords","setTextStyle","fillText","formatText","offsetHeight","removeChild","image","Image","src","getAttribute","onload","drawImage","styles","backgroundColor","fillRect","offsetWidth","drawHTMLTextOnCanvas","drawHTMLImageOnCanvasOnCanvas","drawHTMLBlockOnCanvas","counter","childNodes","length","child","redraw","setAttribute","clientWidth","clientHeight","link","toDataURL","click","tree","svg","elements","headline","mainText","alignment","center","right","newText","formats","vertical","horisontal","square","sizes","width","height","bottom","alignmentPadding","paddingOfElement","paddingOfCanvas","colors","mainSVGcolor","indexOf","type","children","format","setSize","align","key","innerHTML","pasteFromClipboard","bind","setElementAlignment","stopPropagation","preventDefault","data","clipboardData","getData","insertAtCaret","execCommand","createText","createImage","serializer","XMLSerializer","source","serializeToString","match","encodeURIComponent","fontSizes","properties","small","medium","big","buttons","colorForm","hidden","colorMode","normal","active","defaultText","margin","action","buttonClicked","changeColorModeByKey","changeFontSize","changeAlignment","changeColorMode","current","next","setTextFontSize","moveToTarget","setTextColor","background","keyCode","changeColor","value","focus","removeTargetParams","getTargetParams"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 68dd19c6f0b5aed63592","/**\n * DOM elements manipulations\n */\nexport default class Dom {\n\n    /**\n    * Helper for making Elements with classname and attributes\n    * @param  {string} tagName           - new Element tag name\n    * @param  {array|string} classNames  - list or name of CSS classname(s)\n    * @param  {Object} attributes        - any attributes\n    * @return {Element}\n    */\n    static make(tagName, classNames, attributes) {\n\n        var el = document.createElement(tagName);\n\n        if ( Array.isArray(classNames) ) {\n\n            el.classList.add(...classNames);\n\n        } else if( classNames ) {\n\n            el.classList.add(classNames);\n\n        }\n\n        for (let attrName in attributes) {\n\n            el[attrName] = attributes[attrName];\n\n        }\n        return el;\n\n    }\n\n\n    /**\n    * Creates SVG element\n    *\n    * @param {string} tag - element tag name\n    * @param {object} param - parametrs\n    *\n    * @returns {Element} new created svg tag\n    */\n    static svg(tag, param) {\n\n        var n = document.createElementNS('http://www.w3.org/2000/svg', tag);\n\n        for (var p in param) {\n\n            n.setAttributeNS(null, p, param[p]);\n\n        }\n\n        return n;\n\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/dom.js","/**\n * Cover module entry poit\n */\nmodule.exports = function () {\n\n    'use strict';\n\n    /**\n     * Requre CSS\n     */\n    require('./styles/main.css');\n\n    /**\n     * User Interface module\n     */\n    let ui = require('./ui');\n\n    /**\n     * Canvas module\n     * @type {Canvas}\n     */\n    let Redrawer = require('./redrawer').default,\n        Canvas = require('./canvas').default,\n        Toolbar = require('./toolbar').default;\n\n    /**\n     * Initialization method\n     * @param  {object} initParams\n     * @param  {string} initParams.containerId - in that Node we will render Editor\n     */\n    let init = function (initParams = {}) {\n\n        console.assert(initParams.containerId, 'Container id is missed');\n\n        let container = document.getElementById(initParams.containerId);\n\n        if (!container) {\n\n            console.warn('Container was not found by id %o', initParams.containerId);\n            return;\n\n        }\n\n        let redrawerInstance = new Redrawer(),\n            canvasInstance = new Canvas(),\n            toolbarInstance = new Toolbar();\n\n        /**\n         * Make interface and bind events\n         */\n        let nodes = ui.create(container, redrawerInstance, canvasInstance, toolbarInstance);\n\n    };\n\n    /**\n     * Destories UI\n     */\n    let destroy = function () {\n\n    };\n\n    return {\n        init,\n        destroy\n    };\n\n}();\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/styles/main.css\n// module id = 2\n// module chunks = 0","/**\n * User interface module\n */\nmodule.exports = function () {\n\n    'use strict';\n\n    let $ = require('./dom').default;\n\n    /**\n     * Style classnames\n     *\n     * @type {Object}\n     */\n    const CSS = {\n        editor                 : 'cover-editor',\n        controls               : 'cover-editor__controls',\n\n        resizeButton           : 'cover-editor__resize-canvas',\n        resizeButtonActive     : 'cover-editor__resize-canvas--active',\n\n        resizeButtonSquare     : 'cover-editor__resize-canvas--square',\n        resizeButtonVertical   : 'cover-editor__resize-canvas--vertical',\n        resizeButtonHorisontal : 'cover-editor__resize-canvas--horisontal',\n\n        controlButton          : 'cover-editor__control-button',\n        headlineControl        : 'cover-editor__control-button--headline',\n        mainTextControl        : 'cover-editor__control-button--main-text',\n        imageControl           : 'cover-editor__control-button--image',\n        controlButtonSave      : 'cover-editor__control-button--save',\n\n        canvasWrapper          : 'cover-editor__canvas-wrapper',\n        canvas                 : 'cover-editor__canvas',\n        canvasActive           : 'cover-editor__canvas-wrapper--active',\n    };\n\n    /**\n     * Static instances\n     *\n     * @type {Object}\n     */\n    let instances = {\n        redrawer             : null,\n        canvas               : null,\n        toolbar              : null\n    };\n\n    /**\n     * Static nodes cache\n     *\n     * @type {Object}\n     */\n    let nodes = {\n        mainTextElement      : null,\n        headlineElement      : null,\n        pictureElement       : null,\n        currentText          : null,\n        canvasWrapper        : null,\n        canvas               : null,\n        mainRectangle        : null,\n        controls : {\n            resizeSqure      : null,\n            resizeVertical   : null,\n            resizeHorisontal : null,\n            saveButton       : null,\n            pictureButton    : null,\n            mainTextButton   : null,\n            headlineButton   : null,\n        },\n        currentCanvasEditing : null\n    };\n\n    /**\n     * Make canvas active\n     *\n     * @param {event} - click\n     */\n    function canvasClicked(event) {\n\n        if (event.target.classList.contains(CSS.canvasWrapper) ||\n            event.target.tagName == 'rect') {\n\n            instances.toolbar.hide();\n            nodes.canvasWrapper.classList.add(CSS.canvasActive);\n\n        } else {\n\n            nodes.canvasWrapper.classList.remove(CSS.canvasActive);\n\n        }\n\n    }\n\n    /**\n     * Save button click listener\n     */\n    function saveButtonClicked() {\n\n        instances.redrawer.shot(nodes.canvas);\n        instances.redrawer.download();\n\n    }\n\n    /**\n     * Resize button click listener\n     *\n     * @param {MouseEvent} event â€” click\n     */\n    function resizeButtonClicked(event) {\n\n        let button = event.target,\n            size = button.dataset.size;\n\n        ['resizeSqure', 'resizeVertical', 'resizeHorisontal'].forEach( header => {\n\n            nodes.controls[header].classList.remove(CSS.resizeButtonActive);\n\n        });\n\n        event.target.classList.add(CSS.resizeButtonActive);\n        instances.toolbar.hide();\n        instances.canvas.setCanvasFormat(size);\n\n    }\n\n    /**\n     * Control buttons click listener\n     *\n     * @param  {MouseEvent} event  - click\n     */\n    function controlButtonsClicked(event) {\n\n        let button = event.target,\n            object = button.dataset.object;\n\n        createElement(object);\n\n    }\n\n    /**\n     * Create element and add to canvas\n     *\n     * @param {String} elementType - type of element\n     */\n    function createElement(elementType) {\n\n        /**\n         * Check if elementType has already created\n         */\n        if (nodes[elementType]) {\n\n            return;\n\n        }\n\n        nodes[elementType] = instances.canvas.createElement(elementType);\n        nodes[elementType].addEventListener('click', elementClickedHandler);\n        showToolbar(nodes[elementType]);\n\n    }\n\n    /**\n     * Show toolbar\n     *\n     * @param {Element} element - element at the canvas\n     */\n    function showToolbar(element) {\n\n        instances.toolbar.openNear(element);\n\n    }\n\n    /**\n     * Handle click on canvas elements to show toolbar near clicked one\n     */\n    function elementClickedHandler() {\n\n        showToolbar(this);\n\n    }\n\n    /**\n     * Bind necessary event to manupulate controls\n     */\n    function bindEvents() {\n\n        document.body.addEventListener('click', canvasClicked);\n\n        nodes.controls.saveButton.addEventListener('click', saveButtonClicked);\n\n        nodes.controls.resizeSqure.addEventListener('click', resizeButtonClicked);\n        nodes.controls.resizeVertical.addEventListener('click', resizeButtonClicked);\n        nodes.controls.resizeHorisontal.addEventListener('click', resizeButtonClicked);\n\n        nodes.controls.pictureButton.addEventListener('click', controlButtonsClicked);\n        nodes.controls.mainTextButton.addEventListener('click', controlButtonsClicked);\n        nodes.controls.headlineButton.addEventListener('click', controlButtonsClicked);\n\n    }\n\n    /**\n     * Create cover-editor\n     * @param {object} settings - array of paramertres\n     * @param {Element} settings.container - element to create cover-editor\n     */\n    function create(container, redrawerInstance, canvasInstance, toolbarInstance) {\n\n        var editor   = $.make('div', CSS.editor),\n            controls = $.make('div', CSS.controls);\n\n        instances.redrawer              = redrawerInstance;\n        instances.canvas                = canvasInstance;\n        instances.toolbar               = toolbarInstance;\n\n        nodes.canvasWrapper             = $.make('div', CSS.canvasWrapper);\n        nodes.canvas                    = instances.canvas.create(nodes.canvasWrapper);\n        nodes.controls.resizeSqure      = $.make('span', [CSS.resizeButton, CSS.resizeButtonSquare]);\n        nodes.controls.resizeVertical   = $.make('span', [CSS.resizeButton, CSS.resizeButtonVertical]);\n        nodes.controls.resizeHorisontal = $.make('span', [CSS.resizeButton, CSS.resizeButtonHorisontal]);\n        nodes.controls.saveButton       = $.make('span', [CSS.controlButton, CSS.controlButtonSave]);\n        nodes.controls.pictureButton    = $.make('span', [CSS.controlButton, CSS.imageControl], { textContent: 'Image' });\n        nodes.controls.mainTextButton   = $.make('span', [CSS.controlButton, CSS.mainTextControl], { textContent: 'Main Text' });\n        nodes.controls.headlineButton   = $.make('span', [CSS.controlButton, CSS.headlineControl], { textContent: 'Headline' });\n\n        /**\n         * Save size in button's data-size\n         */\n        nodes.controls.resizeSqure.dataset.size = 'square';\n        nodes.controls.resizeVertical.dataset.size = 'vertical';\n        nodes.controls.resizeHorisontal.dataset.size = 'horisontal';\n        nodes.controls.resizeHorisontal.classList.add(CSS.resizeButtonActive);\n\n        /**\n         * Save create element type in button's data-object\n         */\n        nodes.controls.mainTextButton.dataset.object = 'mainText';\n        nodes.controls.headlineButton.dataset.object = 'headline';\n        nodes.controls.pictureButton.dataset.object = 'picture';\n\n        for (let buttonName in nodes.controls) {\n\n            controls.appendChild(nodes.controls[buttonName]);\n\n        }\n\n        editor.appendChild(controls);\n        nodes.canvasWrapper.appendChild(nodes.canvas);\n        editor.appendChild(nodes.canvasWrapper);\n\n        container.appendChild(editor);\n\n        instances.toolbar.create(editor, nodes.canvas, instances.canvas);\n\n        bindEvents();\n\n        return nodes;\n\n    }\n\n\n    return {\n        create\n    };\n\n}();\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui.js","/**\n * DOM utility\n */\nlet $ = require('./dom').default;\n\nexport default class Redrawer {\n\n    constructor() {\n\n        this.canvasElement = document.createElement('canvas');\n        this.canvas = this.canvasElement.getContext('2d');\n        this.shootingElement = null;\n        this.shootingCoords = {\n            top: 0,\n            left: 0\n        };\n\n        // document.body.appendChild(this.canvasElement);\n\n    }\n\n    /**\n     * Redraws a HTMLElement to the HTMLCanvas recoursively\n     * @param {Element} element - DOM tree element which will be redrawed\n     * @return {Object}         - object with top and left coords\n     */\n    getCoords(element) {\n\n        let parent = element.offsetParent,\n            coords = {\n                top: 0,\n                left: 0\n            };\n\n        while (element && element.offsetTop !== undefined && element.offsetLeft !== undefined) {\n\n            coords.top += element.offsetTop;\n            coords.left += element.offsetLeft;\n            element = element.offsetParent;\n\n        }\n\n        coords.top  -= this.shootingCoords.top;\n        coords.left -= this.shootingCoords.left;\n\n        return coords;\n\n    }\n\n    /**\n     * Remove unnesessary spacing and tabulation\n     * @param {String} text - text to edit\n     */\n    formatText(text) {\n\n        let regexp = /\\s+/g;\n\n        text = text.replace(regexp, ' ');\n\n        regexp = /^\\s/g;\n        text = text.replace(regexp, '');\n\n        regexp = /\\s$/g;\n        text = text.replace(regexp, '');\n\n        return text;\n\n    }\n\n    /**\n     * Setts a text styles\n     * @param {Element} element - DOM tree element from what style will be got\n     */\n    setTextStyle(element) {\n\n        let style = window.getComputedStyle(element);\n\n        this.canvas.fillStyle = style.color;\n        this.canvas.font = style.fontStyle + ' ' + style.fontSize + ' ' + style.fontFamily;\n\n    }\n\n    /**\n     * Draw HTML #text element on the HTMLCanvas\n     * @param {Element} element - DOM tree element from what style will be got\n     */\n    drawHTMLTextOnCanvas(element) {\n\n        let text = element.cloneNode(true),\n            span = document.createElement('span'),\n            coords;\n\n        element.parentNode.insertBefore(span, element);\n        coords = this.getCoords(span);\n        span.textContent = element;\n\n        this.setTextStyle(element.parentNode);\n        this.canvas.fillText(this.formatText(element.textContent), coords.left, span.offsetHeight + coords.top);\n        element.parentNode.removeChild(span);\n\n    }\n\n    /**\n     * Draw HTMLImage element on the HTMLCanvas\n     * @param {Element} element - DOM tree element from what style will be got\n     */\n    drawHTMLImageOnCanvas(element) {\n\n        let image = new window.Image(),\n            coords = this.getCoords(element);\n\n        image.src = element.getAttribute('SRC');\n        image.onload = function () {\n\n            this.canvas.drawImage(image, coords.left, coords.top);\n\n        };\n\n    }\n\n    /**\n     * Draw HTMLDiv or another block element on the HTMLCanvas\n     * @param {Element} element - DOM tree element from what style will be got\n     */\n    drawHTMLBlockOnCanvas(element) {\n\n        let styles = window.getComputedStyle(element),\n            coords = this.getCoords(element);\n\n        this.canvas.fillStyle = styles.backgroundColor;\n        this.canvas.fillRect(coords.left, coords.top, element.offsetWidth, element.offsetHeight);\n\n    }\n\n    /**\n     * Redraws a HTMLElement to the HTMLCanvas recoursively\n     * @param {Element} element - DOM tree element which will be redrawed\n     * @param {Number} left     - left coordinate of element\n     * @param {Number} top      - top coordinate of element\n     */\n    redraw(element) {\n\n        let coords;\n\n        switch (element.tagName) {\n\n            case undefined:\n\n                this.drawHTMLTextOnCanvas(element);\n                break;\n\n            case 'IMG':\n\n                this.drawHTMLImageOnCanvasOnCanvas(element);\n                break;\n\n            default:\n\n                this.drawHTMLBlockOnCanvas(element);\n\n                for (let counter = 0; counter < element.childNodes.length; counter++) {\n\n                    let child = element.childNodes[counter];\n\n                    this.redraw(child);\n\n                }\n                break;\n\n        }\n\n    }\n\n    /**\n     * Redraws a HTMLElement to the HTMLCanvas\n     * @param {Element} element - DOM tree element which will be redrawed\n     */\n    shot(element) {\n\n        this.shootingElement = element;\n        this.shootingCoords = this.getCoords(this.shootingElement);\n\n        this.canvasElement.setAttribute('WIDTH', element.clientWidth);\n        this.canvasElement.setAttribute('HEIGHT', element.clientHeight);\n\n        this.redraw(this.shootingElement, 0, 0);\n\n    }\n\n    /**\n     * Export the HTMLCanvas element with screenshot to image and start downloading\n     * @param {Element} element - DOM tree element where to post canvas\n     */\n    download(element) {\n\n        let link = $.make('a', null, {\n            'style': 'display:none;',\n            'href': this.canvasElement.toDataURL('image/png'),\n            'download': 'cover.png'\n        });\n\n        document.body.appendChild(link);\n\n        link.click();\n        document.body.removeChild(link);\n\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/redrawer.js","/**\n * DOM utility\n */\nlet $ = require('./dom').default;\n\n/**\n * Canvas module\n *\n * @property {Object} tree               - object with links to DOM-Elements of Canvas\n * @property {Object} CSS                - object with CSS-styles of the Canvas\n * @property {String} newText            - string with text showing in main text and headline by default\n * @property {Object} formats            - types of sizes of the canvas block\n * @property {Object} sizes              - sizes of canvas block\n * @property {Object} alignment          - types of alignment\n * @property {Object} elements           - types of elements on canvas\n * @property {Number} paddingOfElement   - space field around the text element\n * @property {Number} paddingOfCanvas    - padding between elements and the canvas\n * @property {Number} imageSize          - size of image in px\n * @property {Object} colors             - default colors\n */\nexport default class Canvas {\n\n    /**\n     * Initialization of canvas module\n     */\n    constructor() {\n\n        /**\n         * DOM of this class\n         */\n        this.tree = {\n            svg: null\n        };\n\n        this.CSS = {\n            canvas: 'cover-editor__canvas',\n            element: 'cover-editor__element',\n            elements: {\n                headline: 'cover-editor__headline',\n                image: 'cover-editor__image',\n                mainText: 'cover-editor__mainText'\n            },\n            alignment: {\n                left: 'cover-editor__element--left',\n                center: 'cover-editor__element--center',\n                right: 'cover-editor__element--right',\n            }\n        };\n\n        /**\n         * Const with value: 'New Text'\n         */\n        this.newText = 'New Text';\n\n        /**\n         * Size formats of canvas\n         */\n        this.formats = {\n            vertical: 'vertical',\n            horisontal: 'horisontal',\n            square: 'square'\n        };\n\n        /**\n         * Sizes of canvas\n         */\n        this.sizes = {\n            vertical: {width: 510, height: 560},\n            horisontal: {width: 650, height: 370},\n            square: {width: 510, height: 510}\n        };\n\n        /**\n         * Alignment elements at canvas\n         */\n        this.alignment = {\n            horisontal: {\n                left: 'left',\n                right: 'right',\n                center: 'center'\n            },\n            vertical: {\n                top: 'top',\n                center: 'center',\n                bottom: 'bottom'\n            }\n        };\n\n        /**\n         * Types of elements at canvas\n         */\n        this.elements = {\n            mainText: 'mainText',\n            image: 'picture',\n            headline: 'headline'\n        };\n\n        /**\n         * Space between elements\n         */\n        this.alignmentPadding = 17;\n\n        /**\n         * Space field around the text element\n         */\n        this.paddingOfElement = 10;\n\n        /**\n         * Padding between elements and th canvas\n         */\n        this.paddingOfCanvas = 30;\n\n        /**\n         * Colors of this module\n         */\n        this.colors = {\n            mainSVGcolor: '#FFFFFF',\n        };\n\n    }\n\n    /**\n     * Check if element is text\n     *\n     * @param {Element} - object\n     */\n    isText(element) {\n\n        if ([this.elements.headline, this.elements.mainText].indexOf(element.dataset.type) != -1 && element.children.length) {\n\n            return true;\n\n        } else {\n\n            return false;\n\n        }\n\n    }\n\n    /**\n     * Creates an SVG DOMElement\n     *\n     * @return {Element} - created SVG\n     */\n    create() {\n\n        this.tree.svg = $.make('div');\n        this.tree.svg.classList.add(this.CSS.canvas);\n        this.setCanvasFormat(this.formats.horisontal);\n\n        return this.tree.svg;\n\n    }\n\n    /**\n     * Changing the sizes of canvas by using format\n     *\n     * @param {String} format - type of format, can be 'horisontal', 'square' or 'vertical'\n     */\n    setCanvasFormat( format ) {\n\n        this.setSize(this.tree.svg, this.sizes[format]);\n\n    }\n\n    /**\n     * Changes the sizes of svg element\n     *\n     * @param {Element} element    - element to change size\n     * @param {Object|String} size - sizes of canvas, if string, then 'auto'\n     * @param {Number} size.width  - width of canvas\n     * @param {Number} size.height - height of canvas\n     */\n    setSize( element, size ) {\n\n        if (size.height) {\n\n            element.style.height = size.height + 'px';\n\n        }\n\n        if (size.width) {\n\n            element.style.width = size.width + 'px';\n\n        }\n\n    }\n\n    /**\n     * Changes the color of svg element\n     *\n     * @param {Element} element - element to change size\n     * @param {String} color    - color of text to set\n     */\n    setTextColor(element, color) {\n\n        element.style.color = color;\n\n    }\n\n    /**\n     * Changes the font size of svg element\n     *\n     * @param {Element} element    - element to change size\n     * @param {Number} size        - size of text to set\n     */\n    setTextFontSize( element, size ) {\n\n        element.style.fontSize = size;\n\n    }\n\n    /**\n     * Sets the alignment of the element at the canvas\n     *\n     * @param {Element} element   - element to change alignment\n     * @param {String} horisontal - type of alignment on horisontal\n     * @param {String} vertical   - type of alignment on verlical\n     */\n    setElementAlignment( element, horisontal) {\n\n        let align = {\n            horisontal: this.alignment.horisontal\n        };\n\n        for (let key in this.CSS.alignment) {\n\n            element.classList.remove(this.CSS.alignment[key]);\n\n        }\n\n        switch (horisontal) {\n\n            case align.horisontal.left:\n\n                element.classList.add(this.CSS.alignment.left);\n                break;\n\n            case align.horisontal.center:\n\n                element.classList.add(this.CSS.alignment.center);\n                break;\n\n            case align.horisontal.right:\n\n                element.classList.add(this.CSS.alignment.right);\n                break;\n\n        }\n\n        return;\n\n    }\n\n    /**\n     * Creates an text element\n     *\n     * @param {Object|String} coords   - where to place text on canvas\n     * @param {Number} coords.x        - x coord\n     * @param {Number} coords.y        - y coord\n     * @return {Element}               - created text\n     */\n    createText( type ) {\n\n        let text = $.make('div', [this.CSS.element, this.CSS.elements[type]]);\n\n        text.innerHTML = this.newText;\n        text.dataset.type = type;\n\n        text.setAttribute('contenteditable', true);\n        text.addEventListener('paste', this.pasteFromClipboard.bind(this));\n\n        this.tree.svg.appendChild(text);\n        this.setElementAlignment(text, this.alignment.horisontal.left);\n\n        return text;\n\n    }\n\n    /**\n     * Paste text form clipboard\n     *\n     * @param {ClipboardEvent} event - paste event\n     */\n    pasteFromClipboard(event) {\n\n        event.stopPropagation();\n        event.preventDefault();\n\n        let data = (event.clipboardData || window.clipboardData).getData('Text');\n\n        if (!data) {\n\n            return;\n\n        }\n\n        this.insertAtCaret(data);\n\n    }\n\n    /**\n     * Inserting text to caret position\n     *\n     * @param {String} text - text for inserting\n     */\n    insertAtCaret(text) {\n\n        document.execCommand('insertText', false, text);\n\n    }\n\n    /**\n     * Creates an image element\n     *\n     * @param {String} link - URL of image\n     */\n    createImage(link) {\n\n        let image = $.make('img', [this.CSS.element, this.CSS.elements.image], {src: 'src/assets/icon-picture.svg'});\n\n        this.setElementAlignment(image, this.alignment.horisontal.left);\n        this.tree.svg.appendChild(image);\n\n        return image;\n\n    }\n\n    /**\n     * Creates elements from parameter\n     *\n     * @param {String} - type of elements: 'mainText', 'headline', 'image'\n     */\n    createElement(element) {\n\n        if (element === this.elements.headline || element === this.elements.mainText) {\n\n            return this.createText(element);\n\n        } else if (element === this.elements.image) {\n\n            return this.createImage(element);\n\n        }\n\n    }\n\n    /**\n     * Export canvas as SVG file\n     */\n    export() {\n\n        let serializer = new window.XMLSerializer(),\n            source = serializer.serializeToString(this.tree.svg);\n\n        /**\n         * Match 'source' with regex: \"xmlns=\"http//www.w3.org/2000/svg\" between one and unlimited times and replace it\n         */\n        if (!source.match(/^<svg[^>]+xmlns=\"http\\:\\/\\/www\\.w3\\.org\\/2000\\/svg\"/)) {\n\n            source = source.replace(/^<svg/, '<svg xmlns=\"http://www.w3.org/2000/svg\"');\n\n        }\n\n        /**\n         * Match 'source' with regex: \"xmlns=\"http//www.w3.org/1999/svg\" between one and unlimited times and replace it\n         */\n        if (!source.match(/^<svg[^>]+\"http\\:\\/\\/www\\.w3\\.org\\/1999\\/xlink\"/)) {\n\n            source = source.replace(/^<svg/, '<svg xmlns:xlink=\"http://www.w3.org/1999/xlink\"');\n\n        }\n\n        source = '<?xml version=\"1.0\" standalone=\"no\"?>\\r\\n' + source;\n\n        let link = $.make('a', null, {\n            'style': 'display:none;',\n            'href': 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(source),\n            'download': 'cover.svg'\n        });\n\n        document.body.appendChild(link);\n\n        link.click();\n        document.body.removeChild(link);\n\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/canvas.js","/**\n * DOM utility\n */\nlet $ = require('./dom').default;\n\n/**\n *  Creates a toolbar\n *  @class Toolbar\n *\n *  @property {Object}  tree   â€” toolbar nodes\n *  @property {Object}  CSS    â€” styles dictionary\n *  @property {HTMLElement} editor â€” main editor wrapper\n *  @property {SVGElement} canvas â€” main canvas SVG\n *  @property {HTMLElement} target â€” on which element toolbar was open\n */\nexport default class Toolbar {\n\n    /**\n     * @constructor\n     * Toolbar module\n     *\n     * @param {Object} fontSizes        - font sizes for target elements\n     * @param {String} fontSizes.small  - the smalles text size\n     * @param {String} fontSizes.medium - the medium text size\n     * @param {String} fontSizes.big    - the biggest text size\n     */\n    constructor(fontSizes) {\n\n        /**\n         * Component for controlling canvas.\n         * @type {Object}\n         */\n        this.instances = {\n            canvas: null\n        };\n\n        /**\n         * On which element toolbar was opened\n         * @type {Element|null}\n         */\n        this.target = null;\n\n        /**\n         * Properties for target element at the SVG\n         * @type {Object}\n         */\n        this.properties = {\n            fontSize: {\n                small: fontSizes && fontSizes.small ? fontSizes.small : '25px',\n                medium: fontSizes && fontSizes.medium ? fontSizes.medium : '28px',\n                big: fontSizes && fontSizes.big ? fontSizes.big : '31px'\n            }\n        };\n\n        /**\n         * DOM Elements\n         * @type {Object}\n         */\n        this.tree = {\n            toolbar: undefined,\n            buttons: {\n                fontSize: undefined,\n                left: undefined,\n                center: undefined,\n                right: undefined,\n                color: undefined\n            },\n            colorForm: undefined,\n        };\n\n        /**\n         * CSS classnames\n         * @type {Object}\n         */\n        this.CSS = {\n            hidden: 'cover-editor--hidden',\n            toolbar: {\n                colorMode: 'cover-editor__toolbar--color-mode',\n                normal: 'cover-editor__toolbar'\n            },\n            target: {\n                active: 'cover-editor__text--active',\n                fontSize: [\n                    'cover-editor__text--small',\n                    'cover-editor__text--medium',\n                    'cover-editor__text--big'\n                ],\n            },\n            button : 'cover-editor__button',\n            buttons: {\n                active    : 'cover-editor__button--active',\n                left      : 'cover-editor__button--left',\n                center    : 'cover-editor__button--center',\n                right     : 'cover-editor__button--right',\n                fontSize  : 'cover-editor__button--font-size',\n                fontSizes : {\n                    small: 'cover-editor__button--small',\n                    medium: 'cover-editor__button--medium',\n                    big: 'cover-editor__button--big'\n                },\n                color : 'cover-editor__button--color'\n            },\n            colorForm : 'cover-editor__color-form'\n        };\n\n        /**\n         * Color constants\n         */\n        this.colors = {\n            defaultText : '#000000'\n        };\n\n        /**\n         * Margin between the canvas element and the toolbar\n         */\n        this.margin = 10;\n\n    }\n\n    /**\n     *  Prepares toolbar elements\n     *\n     * @param  {Element} editor         - main wrapper\n     * @param  {Object} canvas          - canvas instance\n     * @param  {Element} canvasInstance - canvas object\n     */\n    create(editor, canvas, canvasInstance) {\n\n        /**\n         * Main Editor wrapper\n         * @type {Element}\n         */\n        this.editor = editor;\n        this.canvas = canvas;\n        this.instances.canvas = canvasInstance;\n\n        this.make();\n\n    }\n\n\n    /**\n     * Creates toolbar\n     */\n    make() {\n\n        this.tree.toolbar = $.make('div', [this.CSS.toolbar.normal, this.CSS.hidden]);\n\n        /**\n         * Add buttons\n         */\n        for (var type in this.tree.buttons) {\n\n            let button = $.make('span', [this.CSS.button, this.CSS.buttons[type]]);\n\n            this.tree.toolbar.appendChild(button);\n            this.tree.buttons[type] = button;\n\n            /**\n             * Save action in the button's dataset\n             */\n            button.dataset.action = type;\n\n            button.addEventListener('click', event => {\n\n                this.buttonClicked(event);\n\n            });\n\n        }\n\n        /**\n         * Add color form\n         */\n        this.tree.colorForm = $.make('input', [ this.CSS.colorForm ]);\n        this.tree.colorForm.addEventListener('keyup', event => {\n\n            this.changeColorModeByKey(event);\n\n        });\n        this.tree.toolbar.insertBefore(this.tree.colorForm, this.tree.buttons.color);\n\n        /**\n         * Append toolbar to the Editor\n         */\n        this.editor.appendChild(this.tree.toolbar);\n\n    }\n\n    /**\n     * Toolbar button click handler\n     * @param  {MouseEvent} event  - click on the button\n     */\n    buttonClicked(event) {\n\n        let buttonClicked = event.target,\n            action = buttonClicked.dataset.action;\n\n        switch ( action ) {\n\n            case 'fontSize':\n                this.changeFontSize();\n                break;\n\n            case 'left':\n            case 'center':\n            case 'right':\n                this.changeAlignment(action);\n                break;\n\n            case 'color':\n                this.changeColorMode();\n                break;\n\n        }\n\n    }\n\n    /**\n     * Change font size of target\n     * @param {Integer} fontSize - number of font size\n     */\n    changeFontSize() {\n\n        let current = this.target.dataset.fontSize,\n            sizes = ['small', 'medium', 'big'],\n            next;\n\n        next = sizes[(sizes.indexOf(current) + 1) % sizes.length];\n\n        this.target.dataset.fontSize = next;\n        this.tree.buttons.fontSize.classList.remove(this.CSS.buttons.fontSizes[current]);\n        this.tree.buttons.fontSize.classList.add(this.CSS.buttons.fontSizes[next]);\n        this.instances.canvas.setTextFontSize(this.target, this.properties.fontSize[next]);\n        this.moveToTarget();\n\n    }\n\n    /**\n     * Open toolbar near element\n     * @param {String} alignment - alignment of target: 'left', 'center' or 'right'\n     */\n    changeAlignment( alignment ) {\n\n        this.target.dataset.alignment = alignment;\n\n        for (let type in this.tree.buttons) {\n\n            if (type !== 'fontSize' && type !== 'color') {\n\n                this.tree.buttons[type].classList.remove(this.CSS.buttons.active);\n\n            }\n\n        };\n\n        this.tree.buttons[alignment].classList.add(this.CSS.buttons.active);\n        this.instances.canvas.setElementAlignment(this.target, alignment, undefined);\n        this.moveToTarget();\n\n    }\n\n    /**\n     * Change color of target and toolbar color button\n     * @param {String} color - color of target\n     */\n    changeColor( color ) {\n\n        if (!color) {\n\n            return;\n\n        }\n\n        this.instances.canvas.setTextColor(this.target, color);\n        this.target.dataset.color = color;\n        this.tree.buttons.color.style.background = color;\n\n    }\n\n    /**\n     * Set color after enter button was clicked on the keyboard\n     */\n    changeColorModeByKey(event) {\n\n        if (event.keyCode != 13) {\n\n            return;\n\n        }\n\n        this.changeColorMode();\n\n    }\n\n    /**\n     * Toggle color mode of toolbar\n     */\n    changeColorMode() {\n\n        if (this.tree.toolbar.classList.contains(this.CSS.toolbar.colorMode)) {\n\n            this.changeColor(this.tree.colorForm.value);\n            this.tree.colorForm.value = '';\n            this.tree.toolbar.classList.remove(this.CSS.toolbar.colorMode);\n\n        } else {\n\n            this.tree.toolbar.classList.add(this.CSS.toolbar.colorMode);\n            this.tree.colorForm.focus();\n\n        }\n\n        this.moveToTarget();\n\n    }\n\n    /**\n     * Get coords of element\n     * @param {Element} element - DOM tree which coords will be got\n     */\n    getCoords(element) {\n\n        var parent = element.offsetParent,\n            coords =\n            {\n                top: 0,\n                left: 0\n            };\n\n        while (element && element.offsetTop !== undefined && element.offsetLeft !== undefined) {\n\n            coords.top += element.offsetTop;\n            coords.left += element.offsetLeft;\n            element = element.offsetParent;\n\n        }\n\n        return coords;\n\n    }\n\n    /**\n     * Move toolbar to target\n     */\n    moveToTarget() {\n\n        let toolbar = this.tree.toolbar,\n            element = this.getCoords(this.target),\n            canvasWrapper = this.getCoords(this.canvas.parentNode.parentNode);\n\n        element.width = this.target.clientWidth;\n\n        switch (this.target.dataset.alignment) {\n\n            case 'left':\n                toolbar.style.left = element.left - canvasWrapper.left + 'px';\n                break;\n\n            case 'center':\n                toolbar.style.left = element.left - canvasWrapper.left - toolbar.clientWidth / 2 + 'px';\n                break;\n\n            case 'right':\n                toolbar.style.left = element.left - canvasWrapper.left + element.width - toolbar.clientWidth + 'px';\n                break;\n\n        }\n\n        toolbar.style.top = element.top - canvasWrapper.top - this.margin - toolbar.clientHeight + 'px';\n\n    }\n\n    /**\n     * Read states of buttons from target\n     */\n    getTargetParams() {\n\n        if (this.target.dataset.fontSize == undefined) {\n\n            this.target.dataset.fontSize = 'big';\n            this.changeFontSize();\n\n        } else {\n\n            this.tree.buttons.fontSize.classList.add(this.CSS.buttons.fontSizes[this.target.dataset.fontSize]);\n\n        }\n\n        if (this.target.dataset.alignment == undefined) {\n\n            this.target.dataset.alignment = 'left';\n\n        }\n        this.changeAlignment(this.target.dataset.alignment);\n\n        if (this.target.dataset.color == undefined) {\n\n            this.target.dataset.color = this.colors.defaultText;\n\n        }\n        this.changeColor(this.target.dataset.color);\n\n    }\n\n    /**\n     * Open toolbar near element\n     *\n     * @param {Element} target - element to which toolbar will be bound\n     */\n    openNear(target) {\n\n        this.removeTargetParams();\n        this.target = target;\n        this.tree.toolbar.classList.remove(this.CSS.hidden);\n        this.moveToTarget();\n        this.getTargetParams();\n\n    }\n\n    /**\n     * Clears buttons states in toolbar\n     */\n    removeTargetParams() {\n\n        this.tree.toolbar.classList.remove(this.CSS.toolbar.colorMode);\n\n        this.tree.buttons.left.classList.remove(this.CSS.buttons.active);\n        this.tree.buttons.center.classList.remove(this.CSS.buttons.active);\n        this.tree.buttons.right.classList.remove(this.CSS.buttons.active);\n\n        for (let key in this.CSS.buttons.fontSizes) {\n\n            this.tree.buttons.fontSize.classList.remove(this.CSS.buttons.fontSizes[key]);\n\n        }\n\n    }\n\n    /**\n     * Hide toolbar\n     */\n    hide() {\n\n        this.target = null;\n        this.tree.toolbar.classList.add(this.CSS.hidden);\n\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/toolbar.js"],"sourceRoot":""}