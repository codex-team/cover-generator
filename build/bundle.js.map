{"version":3,"sources":["webpack:///webpack/bootstrap 492dd1359dfddafcaa18","webpack:///./src/dom.js","webpack:///./src/main.js","webpack:///./src/styles/main.css","webpack:///./src/ui.js","webpack:///./src/canvas.js","webpack:///./src/toolbar.js"],"names":["Dom","tagName","classNames","attributes","el","document","createElement","Array","isArray","classList","add","attrName","tag","param","n","createElementNS","p","setAttributeNS","module","exports","require","ui","Canvas","default","Toolbar","init","initParams","console","assert","containerId","container","getElementById","warn","canvasInstance","toolbarInstance","nodes","create","destroy","$","CSS","editor","controls","resizeButton","resizeButtonActive","resizeButtonSquare","resizeButtonVertical","resizeButtonHorisontal","controlButton","headlineControl","mainTextControl","imageControl","controlButtonSave","canvasWrapper","canvas","canvasActive","instances","toolbar","mainTextElement","headlineElement","pictureElement","currentText","mainRectangle","resizeSqure","resizeVertical","resizeHorisontal","saveButton","pictureButton","mainTextButton","headlineButton","currentCanvasEditing","canvasClicked","event","target","contains","hide","remove","saveButtonClicked","export","resizeButtonClicked","button","size","dataset","forEach","header","setCanvasFormat","controlButtonsClicked","object","elementType","addEventListener","elementClickedHandler","showToolbar","element","openNear","bindEvents","body","make","textContent","buttonName","appendChild","tree","svg","text","newText","formats","vertical","horisontal","square","sizes","width","height","alignment","x","left","right","center","y","top","bottom","elements","mainText","image","headline","alignmentPadding","paddingOfElement","paddingOfCanvas","imageSize","colors","mainSVGcolor","indexOf","type","children","length","rectangle","fill","setSize","format","counter","align","setAlignment","isText","querySelector","setAttribute","clientWidth","clientHeight","offsetWidth","offsetHeight","color","style","fontSize","canvasSizes","elementSizes","window","Number","getAttribute","blockHeight","position","setPosition","parentNode","innerHTML","autoSizing","bind","createText","createImage","serializer","XMLSerializer","source","serializeToString","match","replace","link","encodeURIComponent","click","removeChild","fontSizes","properties","small","medium","big","undefined","buttons","colorForm","hidden","colorMode","normal","active","defaultText","action","buttonClicked","changeColorModeByKey","insertBefore","changeFontSize","changeAlignment","changeColorMode","current","next","setFontSize","moveToTarget","setColor","background","keyCode","changeColor","value","focus","offsetLeft","offsetTop","parseInt","removeTargetParams","getTargetParams","key"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 492dd1359dfddafcaa18","/**\n * DOM elements manipulations\n */\nexport default class Dom {\n\n    /**\n    * Helper for making Elements with classname and attributes\n    * @param  {string} tagName           - new Element tag name\n    * @param  {array|string} classNames  - list or name of CSS classname(s)\n    * @param  {Object} attributes        - any attributes\n    * @return {Element}\n    */\n    static make(tagName, classNames, attributes) {\n\n        var el = document.createElement(tagName);\n\n        if ( Array.isArray(classNames) ) {\n\n            el.classList.add(...classNames);\n\n        } else if( classNames ) {\n\n            el.classList.add(classNames);\n\n        }\n\n        for (let attrName in attributes) {\n\n            el[attrName] = attributes[attrName];\n\n        }\n        return el;\n\n    }\n\n\n    /**\n    * Creates SVG element\n    *\n    * @param {string} tag - element tag name\n    * @param {object} param - parametrs\n    *\n    * @returns {Element} new created svg tag\n    */\n    static svg(tag, param) {\n\n        var n = document.createElementNS('http://www.w3.org/2000/svg', tag);\n\n        for (var p in param) {\n\n            n.setAttributeNS(null, p, param[p]);\n\n        }\n\n        return n;\n\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/dom.js","/**\n * Cover module entry poit\n */\nmodule.exports = function () {\n\n    'use strict';\n\n    /**\n     * Requre CSS\n     */\n    require('./styles/main.css');\n\n    /**\n     * User Interface module\n     */\n    let ui = require('./ui');\n\n    /**\n     * Canvas module\n     * @type {Canvas}\n     */\n    let Canvas = require('./canvas').default,\n        Toolbar = require('./toolbar').default;\n\n    /**\n     * Initialization method\n     * @param  {object} initParams\n     * @param  {string} initParams.containerId - in that Node we will render Editor\n     */\n    let init = function (initParams = {}) {\n\n        console.assert(initParams.containerId, 'Container id is missed');\n\n        let container = document.getElementById(initParams.containerId);\n\n        if (!container) {\n\n            console.warn('Container was not found by id %o', initParams.containerId);\n            return;\n\n        }\n\n        let canvasInstance = new Canvas(),\n            toolbarInstance = new Toolbar();\n\n        /**\n         * Make interface and bind events\n         */\n        let nodes = ui.create(container, canvasInstance, toolbarInstance);\n\n    };\n\n    /**\n     * Destories UI\n     */\n    let destroy = function () {\n\n    };\n\n    return {\n        init,\n        destroy\n    };\n\n}();\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/styles/main.css\n// module id = 2\n// module chunks = 0","/**\n * User interface module\n */\nmodule.exports = function () {\n\n    'use strict';\n\n    let $ = require('./dom').default;\n\n    /**\n     * Style classnames\n     *\n     * @type {Object}\n     */\n    const CSS = {\n        editor                 : 'cover-editor',\n        controls               : 'cover-editor__controls',\n\n        resizeButton           : 'cover-editor__resize-canvas',\n        resizeButtonActive     : 'cover-editor__resize-canvas--active',\n\n        resizeButtonSquare     : 'cover-editor__resize-canvas--square',\n        resizeButtonVertical   : 'cover-editor__resize-canvas--vertical',\n        resizeButtonHorisontal : 'cover-editor__resize-canvas--horisontal',\n\n        controlButton          : 'cover-editor__control-button',\n        headlineControl        : 'cover-editor__control-button--headline',\n        mainTextControl        : 'cover-editor__control-button--main-text',\n        imageControl           : 'cover-editor__control-button--image',\n        controlButtonSave      : 'cover-editor__control-button--save',\n\n        canvasWrapper          : 'cover-editor__canvas-wrapper',\n        canvas                 : 'cover-editor__canvas',\n        canvasActive           : 'cover-editor__canvas-wrapper--active',\n    };\n\n    /**\n     * Static instances\n     *\n     * @type {Object}\n     */\n    let instances = {\n        canvas               : null,\n        toolbar              : null\n    };\n\n    /**\n     * Static nodes cache\n     *\n     * @type {Object}\n     */\n    let nodes = {\n        mainTextElement      : null,\n        headlineElement      : null,\n        pictureElement       : null,\n        currentText          : null,\n        canvasWrapper        : null,\n        canvas               : null,\n        mainRectangle        : null,\n        controls : {\n            resizeSqure      : null,\n            resizeVertical   : null,\n            resizeHorisontal : null,\n            saveButton       : null,\n            pictureButton    : null,\n            mainTextButton   : null,\n            headlineButton   : null,\n        },\n        currentCanvasEditing : null\n    };\n\n    /**\n     * Make canvas active\n     *\n     * @param {event} - click\n     */\n    function canvasClicked(event) {\n\n        if (event.target.classList.contains(CSS.canvasWrapper) ||\n            event.target.tagName == 'rect') {\n\n            instances.toolbar.hide();\n            nodes.canvasWrapper.classList.add(CSS.canvasActive);\n\n        } else {\n\n            nodes.canvasWrapper.classList.remove(CSS.canvasActive);\n\n        }\n\n    }\n\n    /**\n     * Save button click listener\n     */\n    function saveButtonClicked() {\n\n        instances.canvas.export();\n\n    }\n\n    /**\n     * Resize button click listener\n     *\n     * @param {MouseEvent} event â€” click\n     */\n    function resizeButtonClicked(event) {\n\n        let button = event.target,\n            size = button.dataset.size;\n\n        ['resizeSqure', 'resizeVertical', 'resizeHorisontal'].forEach( header => {\n\n            nodes.controls[header].classList.remove(CSS.resizeButtonActive);\n\n        });\n\n        event.target.classList.add(CSS.resizeButtonActive);\n        instances.toolbar.hide();\n        instances.canvas.setCanvasFormat(size);\n\n    }\n\n    /**\n     * Control buttons click listener\n     *\n     * @param  {MouseEvent} event  - click\n     */\n    function controlButtonsClicked(event) {\n\n        let button = event.target,\n            object = button.dataset.object;\n\n        createElement(object);\n\n    }\n\n    /**\n     * Create element and add to canvas\n     *\n     * @param {String} elementType - type of element\n     */\n    function createElement(elementType) {\n\n        /**\n         * Check if elementType has already created\n         */\n        if (nodes[elementType]) {\n\n            return;\n\n        }\n\n        nodes[elementType] = instances.canvas.createElement(elementType);\n        nodes[elementType].addEventListener('click', elementClickedHandler);\n        showToolbar(nodes[elementType]);\n\n    }\n\n    /**\n     * Show toolbar\n     *\n     * @param {Element} element - element at the canvas\n     */\n    function showToolbar(element) {\n\n        instances.toolbar.openNear(element);\n\n    }\n\n    /**\n     * Handle click on canvas elements to show toolbar near clicked one\n     */\n    function elementClickedHandler() {\n\n        showToolbar(this);\n\n    }\n\n    /**\n     * Bind necessary event to manupulate controls\n     */\n    function bindEvents() {\n\n        document.body.addEventListener('click', canvasClicked);\n\n        nodes.controls.saveButton.addEventListener('click', saveButtonClicked);\n\n        nodes.controls.resizeSqure.addEventListener('click', resizeButtonClicked);\n        nodes.controls.resizeVertical.addEventListener('click', resizeButtonClicked);\n        nodes.controls.resizeHorisontal.addEventListener('click', resizeButtonClicked);\n\n        nodes.controls.pictureButton.addEventListener('click', controlButtonsClicked);\n        nodes.controls.mainTextButton.addEventListener('click', controlButtonsClicked);\n        nodes.controls.headlineButton.addEventListener('click', controlButtonsClicked);\n\n    }\n\n    /**\n     * Create cover-editor\n     * @param {object} settings - array of paramertres\n     * @param {Element} settings.container - element to create cover-editor\n     */\n    function create(container, canvasInstance, toolbarInstance) {\n\n        var editor   = $.make('div', CSS.editor),\n            controls = $.make('div', CSS.controls);\n\n\n        instances.canvas                = canvasInstance;\n        instances.toolbar               = toolbarInstance;\n\n        nodes.canvasWrapper             = $.make('div', CSS.canvasWrapper);\n        nodes.canvas                    = instances.canvas.create(nodes.canvasWrapper);\n        nodes.controls.resizeSqure      = $.make('span', [CSS.resizeButton, CSS.resizeButtonSquare]);\n        nodes.controls.resizeVertical   = $.make('span', [CSS.resizeButton, CSS.resizeButtonVertical]);\n        nodes.controls.resizeHorisontal = $.make('span', [CSS.resizeButton, CSS.resizeButtonHorisontal]);\n        nodes.controls.saveButton       = $.make('span', [CSS.controlButton, CSS.controlButtonSave]);\n        nodes.controls.pictureButton    = $.make('span', [CSS.controlButton, CSS.imageControl], { textContent: 'Image' });\n        nodes.controls.mainTextButton   = $.make('span', [CSS.controlButton, CSS.mainTextControl], { textContent: 'Main Text' });\n        nodes.controls.headlineButton   = $.make('span', [CSS.controlButton, CSS.headlineControl], { textContent: 'Headline' });\n\n        /**\n         * Save size in button's data-size\n         */\n        nodes.controls.resizeSqure.dataset.size = 'square';\n        nodes.controls.resizeVertical.dataset.size = 'vertical';\n        nodes.controls.resizeHorisontal.dataset.size = 'horisontal';\n        nodes.controls.resizeHorisontal.classList.add(CSS.resizeButtonActive);\n\n        /**\n         * Save create element type in button's data-object\n         */\n        nodes.controls.mainTextButton.dataset.object = 'mainText';\n        nodes.controls.headlineButton.dataset.object = 'headline';\n        nodes.controls.pictureButton.dataset.object = 'picture';\n\n        for (let buttonName in nodes.controls) {\n\n            controls.appendChild(nodes.controls[buttonName]);\n\n        }\n\n        editor.appendChild(controls);\n        nodes.canvasWrapper.appendChild(nodes.canvas);\n        editor.appendChild(nodes.canvasWrapper);\n\n        container.appendChild(editor);\n\n        instances.toolbar.create(editor, nodes.canvas, instances.canvas);\n\n        bindEvents();\n\n        return nodes;\n\n    }\n\n\n    return {\n        create\n    };\n\n}();\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui.js","/**\n * DOM utility\n */\nlet $ = require('./dom').default;\n\n/**\n * Canvas module\n *\n * @property {Object} tree               - object with links to DOM-Elements of Canvas\n * @property {Object} CSS                - object with CSS-styles of the Canvas\n * @property {String} newText            - string with text showing in main text and headline by default\n * @property {Object} formats            - types of sizes of the canvas block\n * @property {Object} sizes              - sizes of canvas block\n * @property {Object} alignment          - types of alignment\n * @property {Object} elements           - types of elements on canvas\n * @property {Number} paddingOfElement   - space field around the text element\n * @property {Number} paddingOfCanvas    - padding between elements and the canvas\n * @property {Number} imageSize          - size of image in px\n * @property {Object} colors             - default colors\n */\nexport default class Canvas {\n\n    /**\n     * Initialization of canvas module\n     */\n    constructor() {\n\n        /**\n         * DOM of this class\n         */\n        this.tree = {\n            svg: null\n        };\n\n        this.CSS = {\n            text: 'cover-editor__canvas--text'\n        };\n\n        /**\n         * Const with value: 'New Text'\n         */\n        this.newText = 'New Text';\n\n        /**\n         * Size formats of canvas\n         */\n        this.formats = {\n            vertical: 'vertical',\n            horisontal: 'horisontal',\n            square: 'square'\n        };\n\n        /**\n         * Sizes of canvas\n         */\n        this.sizes = {\n            vertical: {width: 510, height: 560},\n            horisontal: {width: 650, height: 370},\n            square: {width: 510, height: 510}\n        };\n\n        /**\n         * Alignment elements at canvas\n         */\n        this.alignment = {\n            x: {\n                left: 'left',\n                right: 'right',\n                center: 'center'\n            },\n            y: {\n                top: 'top',\n                center: 'center',\n                bottom: 'bottom'\n            }\n        };\n\n        /**\n         * Types of elements at canvas\n         */\n        this.elements = {\n            mainText: 'mainText',\n            image: 'image',\n            headline: 'headline'\n        };\n\n        /**\n         * Space between elements\n         */\n        this.alignmentPadding = 17;\n\n        /**\n         * Space field around the text element\n         */\n        this.paddingOfElement = 10;\n\n        /**\n         * Padding between elements and th canvas\n         */\n        this.paddingOfCanvas = 30;\n\n        /**\n         * Size of image\n         */\n        this.imageSize = 87;\n\n        /**\n         * Colors of this module\n         */\n        this.colors = {\n            mainSVGcolor: '#FFFFFF',\n        };\n\n    }\n\n    /**\n     * Check if element is text\n     *\n     * @param {Element} - object\n     */\n    isText(element) {\n\n        if ([this.elements.headline, this.elements.mainText].indexOf(element.dataset.type) != -1 && element.children.length) {\n\n            return true;\n\n        } else {\n\n            return false;\n\n        }\n\n    }\n\n    /**\n     * Creates an SVG DOMElement\n     *\n     * @return {Element} - created SVG\n     */\n    create() {\n\n        this.tree.rectangle = $.svg('rect', {fill: this.colors.mainSVGcolor});\n        this.setSize(this.tree.rectangle, this.sizes.horisontal);\n\n        this.tree.svg = $.svg('svg');\n        this.setCanvasFormat(this.formats.horisontal);\n        this.tree.svg.appendChild(this.tree.rectangle);\n\n        return this.tree.svg;\n\n    }\n\n    /**\n     * Changing the sizes of canvas by using format\n     *\n     * @param {String} format - type of format, can be 'horisontal', 'square' or 'vertical'\n     */\n    setCanvasFormat( format ) {\n\n        this.setSize(this.tree.svg, this.sizes[format]);\n        this.setSize(this.tree.rectangle, this.sizes[format]);\n\n        for (let counter = 0; counter < this.tree.svg.children.length; counter++) {\n\n            let element = this.tree.svg.children[counter],\n                align = {\n                    x: element.dataset.alignment,\n                    y: null\n                };\n\n            switch (element.dataset.type) {\n\n                case this.elements.headline:\n\n                    align.y = this.alignment.y.top;\n                    break;\n\n                case this.elements.image:\n\n                    align.y = this.alignment.y.center;\n                    break;\n\n                case this.elements.mainText:\n\n                    align.y = this.alignment.y.bottom;\n                    break;\n\n            }\n\n            this.setAlignment(element, align.x, align.y);\n\n        }\n\n    }\n\n    /**\n     * Changes the sizes of svg element\n     *\n     * @param {Element} element    - element to change size\n     * @param {Object|String} size - sizes of canvas, if string, then 'auto'\n     * @param {Number} size.width  - width of canvas\n     * @param {Number} size.height - height of canvas\n     */\n    setSize( element, size ) {\n\n        if (size === 'auto' && this.isText(element)) {\n\n            let text = element.querySelector('div[contenteditable=\"true\"]');\n\n            element.setAttribute('width', this.tree.svg.clientWidth);\n            element.setAttribute('height', this.tree.svg.clientHeight);\n            size = {\n                width: text.offsetWidth + this.paddingOfElement,\n                height: text.offsetHeight + this.paddingOfElement\n            };\n\n        }\n\n        if (size.height) {\n\n            element.setAttribute('height', size.height);\n\n        }\n\n        if (size.width) {\n\n            element.setAttribute('width', size.width);\n\n        }\n\n    }\n\n    /**\n     * Changes the color of svg element\n     *\n     * @param {Element} element - element to change size\n     * @param {String} color    - color of text to set\n     */\n    setColor(element, color) {\n\n        if (!this.isText(element)) return;\n\n        element.querySelector('div[contenteditable=\"true\"]').style.color = color;\n\n    }\n\n    /**\n     * Changes the font size of svg element\n     *\n     * @param {Element} element    - element to change size\n     * @param {Number} size        - size of text to set\n     */\n    setFontSize( element, size ) {\n\n        if (!this.isText(element)) return;\n\n        element.querySelector('div[contenteditable=\"true\"]').style.fontSize = size;\n        this.setSize(element, 'auto');\n        this.setAlignment(element, element.dataset.alignment);\n\n    }\n\n    /**\n     * Sets the alignment of the element at the canvas\n     *\n     * @param {Element} element   - element to change alignment\n     * @param {String} horisontal - type of alignment on horisontal\n     * @param {String} vertical   - type of alignment on verlical\n     */\n    setAlignment( element, horisontal, vertical ) {\n\n        let canvasSizes = {\n                width: this.tree.svg.clientWidth,\n                height: this.tree.svg.clientHeight\n            },\n            elementSizes = {\n                width: window.Number(element.getAttribute('width')),\n                height: window.Number(element.getAttribute('height'))\n            },\n            blockHeight = (canvasSizes.height - 2 * this.alignmentPadding) / 3,\n            align = {\n                x: this.alignment.x,\n                y: this.alignment.y\n            },\n            position = {\n                x: null,\n                y: null\n            };\n\n        switch (horisontal) {\n\n            case align.x.left:\n\n                position.x = this.paddingOfElement;\n                break;\n\n            case align.x.center:\n\n                position.x = (canvasSizes.width - elementSizes.width) / 2;\n                break;\n\n            case align.x.right:\n\n                position.x = canvasSizes.width - elementSizes.width - this.paddingOfElement;\n                break;\n\n        }\n\n        switch (vertical) {\n\n            case align.y.top:\n\n                position.y = blockHeight - elementSizes.height;\n                break;\n\n            case align.y.center:\n\n                position.y = blockHeight + this.alignmentPadding;\n                break;\n\n            case align.y.bottom:\n\n                position.y = blockHeight * 2 + this.alignmentPadding * 2;\n                break;\n\n        }\n\n        this.setPosition(element, position.x, position.y);\n\n        return;\n\n    }\n\n    /**\n     * Changes a position of element\n     *\n     * @param {Element} element - element to change position\n     * @param {Number} x        - x coord\n     * @param {Number} y        - y coord\n     */\n    setPosition( element, x, y ) {\n\n        if (typeof y === 'number') {\n\n            element.setAttribute('y', y);\n\n        }\n\n        if (typeof x === 'number') {\n\n            element.setAttribute('x', x);\n\n        }\n\n    }\n\n    /**\n     * For auto resizing text\n     *\n     * @param {Event} event - KeyUp\n     */\n    autoSizing(event) {\n\n        let target = event.target;\n\n        this.setSize(target.parentNode, 'auto');\n        this.setAlignment(target.parentNode, target.parentNode.dataset.alignment);\n\n    }\n\n    /**\n     * Creates an text element\n     *\n     * @param {Object|String} coords   - where to place text on canvas\n     * @param {Number} coords.x        - x coord\n     * @param {Number} coords.y        - y coord\n     * @return {Element}               - created text\n     */\n    createText( type ) {\n\n        let text = $.make('div', this.CSS.text),\n            container = $.svg('foreignObject'),\n            y = 0;\n\n        text.innerHTML = this.newText;\n        text.setAttribute('contenteditable', true);\n        text.addEventListener('keyup', this.autoSizing.bind(this));\n\n        container.dataset.type = type;\n        container.appendChild(text);\n        this.tree.svg.appendChild(container);\n\n        switch (type) {\n\n            case (this.elements.headline):\n\n                y = 'top';\n                break;\n\n            case (this.elements.mainText):\n\n                y = 'bottom';\n                break;\n\n        }\n\n        this.setSize(container, 'auto');\n        this.setAlignment(container, this.alignment.x.left, y);\n\n        return container;\n\n    }\n\n    /**\n     * Creates an image element\n     */\n    createImage() {\n\n        let image = $.svg('image');\n\n        this.setAlignment(image, this.alignment.x.left, this.alignment.y.center);\n        this.setSize(image, {\n            width: this.imageSize,\n            height: this.imageSize\n        });\n        this.tree.svg.appendChild(image);\n\n        return image;\n\n    }\n\n    /**\n     * Creates elements from parameter\n     *\n     * @param {String} - type of elements: 'mainText', 'headline', 'image'\n     */\n    createElement( element ) {\n\n        if (element === this.elements.headline || element === this.elements.mainText) {\n\n            return this.createText(element);\n\n        } else if (element === this.elements.image) {\n\n            return this.createImage(element);\n\n        }\n\n    }\n\n    /**\n     * Export canvas as SVG file\n     */\n    export() {\n\n        let serializer = new window.XMLSerializer(),\n            source = serializer.serializeToString(this.tree.svg);\n\n        /**\n         * Match 'source' with regex: \"xmlns=\"http//www.w3.org/2000/svg\" between one and unlimited times and replace it\n         */\n        if (!source.match(/^<svg[^>]+xmlns=\"http\\:\\/\\/www\\.w3\\.org\\/2000\\/svg\"/)) {\n\n            source = source.replace(/^<svg/, '<svg xmlns=\"http://www.w3.org/2000/svg\"');\n\n        }\n\n        /**\n         * Match 'source' with regex: \"xmlns=\"http//www.w3.org/1999/svg\" between one and unlimited times and replace it\n         */\n        if (!source.match(/^<svg[^>]+\"http\\:\\/\\/www\\.w3\\.org\\/1999\\/xlink\"/)) {\n\n            source = source.replace(/^<svg/, '<svg xmlns:xlink=\"http://www.w3.org/1999/xlink\"');\n\n        }\n\n        source = '<?xml version=\"1.0\" standalone=\"no\"?>\\r\\n' + source;\n\n        let link = $.make('a', null, {\n            'style': 'display:none;',\n            'href': 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(source),\n            'download': 'cover.svg'\n        });\n\n        document.body.appendChild(link);\n\n        link.click();\n        document.body.removeChild(link);\n\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/canvas.js","/**\n * DOM utility\n */\nlet $ = require('./dom').default;\n\n/**\n *  Creates a toolbar\n *  @class Toolbar\n *\n *  @property {Object}  tree   â€” toolbar nodes\n *  @property {Object}  CSS    â€” styles dictionary\n *  @property {HTMLElement} editor â€” main editor wrapper\n *  @property {SVGElement} canvas â€” main canvas SVG\n *  @property {HTMLElement} target â€” on which element toolbar was open\n */\nexport default class Toolbar {\n\n    /**\n     * @constructor\n     * Toolbar module\n     *\n     * @param {Object} fontSizes        - font sizes for target elements\n     * @param {String} fontSizes.small  - the smalles text size\n     * @param {String} fontSizes.medium - the medium text size\n     * @param {String} fontSizes.big    - the biggest text size\n     */\n    constructor(fontSizes) {\n\n        /**\n         * Component for controlling canvas.\n         * @type {Object}\n         */\n        this.instances = {\n            canvas: null\n        };\n\n        /**\n         * On which element toolbar was opened\n         * @type {Element|null}\n         */\n        this.target = null;\n\n        /**\n         * Properties for target element at the SVG\n         * @type {Object}\n         */\n        this.properties = {\n            fontSize: {\n                small: fontSizes && fontSizes.small ? fontSizes.small : '25px',\n                medium: fontSizes && fontSizes.medium ? fontSizes.medium : '28px',\n                big: fontSizes && fontSizes.big ? fontSizes.big : '31px'\n            }\n        };\n\n        /**\n         * DOM Elements\n         * @type {Object}\n         */\n        this.tree = {\n            toolbar: undefined,\n            buttons: {\n                fontSize: undefined,\n                left: undefined,\n                center: undefined,\n                right: undefined,\n                color: undefined\n            },\n            colorForm: undefined,\n        };\n\n        /**\n         * CSS classnames\n         * @type {Object}\n         */\n        this.CSS = {\n            hidden: 'cover-editor--hidden',\n            toolbar: {\n                colorMode: 'cover-editor__toolbar--color-mode',\n                normal: 'cover-editor__toolbar'\n            },\n            target: {\n                active: 'cover-editor__text--active',\n                fontSize: [\n                    'cover-editor__text--small',\n                    'cover-editor__text--medium',\n                    'cover-editor__text--big'\n                ],\n            },\n            button : 'cover-editor__button',\n            buttons: {\n                active    : 'cover-editor__button--active',\n                left      : 'cover-editor__button--left',\n                center    : 'cover-editor__button--center',\n                right     : 'cover-editor__button--right',\n                fontSize  : 'cover-editor__button--font-size',\n                fontSizes : {\n                    small: 'cover-editor__button--small',\n                    medium: 'cover-editor__button--medium',\n                    big: 'cover-editor__button--big'\n                },\n                color : 'cover-editor__button--color'\n            },\n            colorForm : 'cover-editor__color-form'\n        };\n\n        /**\n         * Color constants\n         */\n        this.colors = {\n            defaultText : '#000000'\n        };\n\n    }\n\n    /**\n     *  Prepares toolbar elements\n     *\n     * @param  {Element} editor         - main wrapper\n     * @param  {Object} canvas          - canvas instance\n     * @param  {Element} canvasInstance - canvas object\n     */\n    create(editor, canvas, canvasInstance) {\n\n        /**\n         * Main Editor wrapper\n         * @type {Element}\n         */\n        this.editor = editor;\n        this.canvas = canvas;\n        this.instances.canvas = canvasInstance;\n\n        this.make();\n\n    }\n\n\n    /**\n     * Creates toolbar\n     */\n    make() {\n\n        this.tree.toolbar = $.make('div', [this.CSS.toolbar.normal, this.CSS.hidden]);\n\n        /**\n         * Add buttons\n         */\n        for (var type in this.tree.buttons) {\n\n            let button = $.make('span', [this.CSS.button, this.CSS.buttons[type]]);\n\n            this.tree.toolbar.appendChild(button);\n            this.tree.buttons[type] = button;\n\n            /**\n             * Save action in the button's dataset\n             */\n            button.dataset.action = type;\n\n            button.addEventListener('click', event => {\n\n                this.buttonClicked(event);\n\n            });\n\n        }\n\n        /**\n         * Add color form\n         */\n        this.tree.colorForm = $.make('input', [ this.CSS.colorForm ]);\n        this.tree.colorForm.addEventListener('keyup', event => {\n\n            this.changeColorModeByKey(event);\n\n        });\n        this.tree.toolbar.insertBefore(this.tree.colorForm, this.tree.buttons.color);\n\n        /**\n         * Append toolbar to the Editor\n         */\n        this.editor.appendChild(this.tree.toolbar);\n\n    }\n\n    /**\n     * Toolbar button click handler\n     * @param  {MouseEvent} event  - click on the button\n     */\n    buttonClicked(event) {\n\n        let buttonClicked = event.target,\n            action = buttonClicked.dataset.action;\n\n        switch ( action ) {\n\n            case 'fontSize':\n                this.changeFontSize();\n                break;\n\n            case 'left':\n            case 'center':\n            case 'right':\n                this.changeAlignment(action);\n                break;\n\n            case 'color':\n                this.changeColorMode();\n                break;\n\n        }\n\n    }\n\n    /**\n     * Change font size of target\n     * @param {Integer} fontSize - number of font size\n     */\n    changeFontSize() {\n\n        let current = this.target.dataset.fontSize,\n            sizes = ['small', 'medium', 'big'],\n            next;\n\n        next = sizes[(sizes.indexOf(current) + 1) % sizes.length];\n\n        this.target.dataset.fontSize = next;\n        this.tree.buttons.fontSize.classList.remove(this.CSS.buttons.fontSizes[current]);\n        this.tree.buttons.fontSize.classList.add(this.CSS.buttons.fontSizes[next]);\n        this.instances.canvas.setFontSize(this.target, this.properties.fontSize[next]);\n        this.moveToTarget();\n\n    }\n\n    /**\n     * Open toolbar near element\n     * @param {String} alignment - alignment of target: 'left', 'center' or 'right'\n     */\n    changeAlignment( alignment ) {\n\n        this.target.dataset.alignment = alignment;\n\n        for (let type in this.tree.buttons) {\n\n            if (type !== 'fontSize' && type !== 'color') {\n\n                this.tree.buttons[type].classList.remove(this.CSS.buttons.active);\n\n            }\n\n        };\n\n        this.tree.buttons[alignment].classList.add(this.CSS.buttons.active);\n        this.instances.canvas.setAlignment(this.target, alignment, undefined);\n        this.moveToTarget();\n\n    }\n\n    /**\n     * Change color of target and toolbar color button\n     * @param {String} color - color of target\n     */\n    changeColor( color ) {\n\n        if (!color) {\n\n            return;\n\n        }\n\n        this.instances.canvas.setColor(this.target, color);\n        this.target.dataset.color = color;\n        this.tree.buttons.color.style.background = color;\n\n    }\n\n    /**\n     * Set color after enter button was clicked on the keyboard\n     */\n    changeColorModeByKey(event) {\n\n        if (event.keyCode != 13) {\n\n            return;\n\n        }\n\n        this.changeColorMode();\n\n    }\n\n    /**\n     * Toggle color mode of toolbar\n     */\n    changeColorMode() {\n\n        if (this.tree.toolbar.classList.contains(this.CSS.toolbar.colorMode)) {\n\n            this.changeColor(this.tree.colorForm.value);\n            this.tree.colorForm.value = '';\n            this.tree.toolbar.classList.remove(this.CSS.toolbar.colorMode);\n\n        } else {\n\n            this.tree.toolbar.classList.add(this.CSS.toolbar.colorMode);\n            this.tree.colorForm.focus();\n\n        }\n\n        this.moveToTarget();\n\n    }\n\n    /**\n     * Move toolbar to target\n     */\n    moveToTarget() {\n\n        let toolbar = this.tree.toolbar,\n            canvasWrapper = {\n                left: this.canvas.parentNode.offsetLeft,\n                top: this.canvas.parentNode.offsetTop\n            },\n            element = {\n                left: window.parseInt(this.target.getAttribute('x')),\n                top: window.parseInt(this.target.getAttribute('y')),\n                width: this.target.clientWidth\n            };\n\n        switch (this.target.dataset.alignment) {\n\n            case 'left':\n                toolbar.style.left = canvasWrapper.left + element.left + 'px';\n                break;\n\n            case 'center':\n                toolbar.style.left = canvasWrapper.left + element.left + (element.width - toolbar.clientWidth) / 2 + 'px';\n                break;\n\n            case 'right':\n                toolbar.style.left = canvasWrapper.left + element.left + element.width - toolbar.clientWidth + 'px';\n                break;\n\n        }\n\n        toolbar.style.top = canvasWrapper.top + element.top - toolbar.clientHeight + 'px';\n\n    }\n\n    /**\n     * Read states of buttons from target\n     */\n    getTargetParams() {\n\n        if (this.target.dataset.fontSize == undefined) {\n\n            this.target.dataset.fontSize = 'big';\n            this.changeFontSize();\n\n        } else {\n\n            this.tree.buttons.fontSize.classList.add(this.CSS.buttons.fontSizes[this.target.dataset.fontSize]);\n\n        }\n\n        if (this.target.dataset.alignment == undefined) {\n\n            this.target.dataset.alignment = 'left';\n\n        }\n        this.changeAlignment(this.target.dataset.alignment);\n\n        if (this.target.dataset.color == undefined) {\n\n            this.target.dataset.color = this.colors.defaultText;\n\n        }\n        this.changeColor(this.target.dataset.color);\n\n    }\n\n    /**\n     * Open toolbar near element\n     *\n     * @param {Element} target - element to which toolbar will be bound\n     */\n    openNear(target) {\n\n        this.removeTargetParams();\n        this.target = target;\n        this.tree.toolbar.classList.remove(this.CSS.hidden);\n        this.moveToTarget();\n        this.getTargetParams();\n\n    }\n\n    /**\n     * Clears buttons states in toolbar\n     */\n    removeTargetParams() {\n\n        this.tree.toolbar.classList.remove(this.CSS.toolbar.colorMode);\n\n        this.tree.buttons.left.classList.remove(this.CSS.buttons.active);\n        this.tree.buttons.center.classList.remove(this.CSS.buttons.active);\n        this.tree.buttons.right.classList.remove(this.CSS.buttons.active);\n\n        for (let key in this.CSS.buttons.fontSizes) {\n\n            this.tree.buttons.fontSize.classList.remove(this.CSS.buttons.fontSizes[key]);\n\n        }\n\n    }\n\n    /**\n     * Hide toolbar\n     */\n    hide() {\n\n        this.target = null;\n        this.tree.toolbar.classList.add(this.CSS.hidden);\n\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/toolbar.js"],"sourceRoot":""}